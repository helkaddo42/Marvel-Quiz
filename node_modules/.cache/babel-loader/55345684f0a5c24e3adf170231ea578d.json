{"ast":null,"code":"var _jsxFileName = \"/Users/hicham/Desktop/marvel/src/component/QuizOver/index.js\";\nimport React, { Fragment, useEffect, useState } from 'react';\nimport { GiTrophyCup } from 'react-icons/gi';\nimport Loader from '../Loader/loader';\nimport Modal from '../Modal/index';\nimport axios from 'axios';\nconst QuizOver = React.forwardRef((props, ref) => {\n  const API_PUBLIC_KEY = process.env.REACT_APP_MARVEL_API_KEY;\n  const hash = 'c15fe769e9cfc9b7538d3326c78bb9bd';\n  const {\n    levelName,\n    score,\n    maxQuestions,\n    quizLevel,\n    percent,\n    loadLevelQuestions\n  } = props;\n  const [asked, setasked] = useState([]);\n  const [openModal, setOpenModal] = useState(false);\n  const [infoCharacter, setInfoCharacter] = useState([]);\n  const [loader, setLoader] = useState(true);\n  useEffect(() => {\n    setasked(ref.current);\n\n    if (localStorage.getItem('marvelStorageDate')) {\n      const dateStorage = localStorage.getItem('marvelStorageDate');\n      checkDateAge(dateStorage);\n    }\n  }, [ref]);\n\n  const checkDateAge = date => {\n    const today = Date.now();\n    const time = today - date;\n    const days = time / (1000 * 3600 * 24);\n\n    if (days >= 15) {\n      localStorage.clear();\n      localStorage.setItem('marvelStorageDate', Date.now());\n    }\n  };\n\n  const showModal = idHero => {\n    if (localStorage.getItem(idHero)) {\n      setInfoCharacter(JSON.parse(localStorage.getItem(idHero)));\n      setLoader(false);\n    } else {\n      setOpenModal(true);\n      axios.get(`https://gateway.marvel.com/v1/public/characters/${idHero}?ts=1&apikey=${API_PUBLIC_KEY}&$hash=${hash}`).then(response => {\n        setInfoCharacter(response.data);\n        setLoader(false);\n        localStorage.setItem(idHero, JSON.stringify(response.data));\n\n        if (!localStorage.getItem('marvelStorageDate')) {\n          localStorage.setItem('marvelStorageDate', Date.now());\n        }\n      }).catch(err => console.log(err));\n    }\n  };\n\n  const hideModal = () => {\n    setOpenModal(false);\n    setLoader(true);\n  };\n\n  const averageGrade = maxQuestions / 2;\n\n  if (score < averageGrade) {\n    setTimeout(() => loadLevelQuestions(quizLevel), 2000);\n  }\n\n  const decision = score >= averageGrade ? /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"stepsBtnContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }, quizLevel < levelName.length ? /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"successMsg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 21\n    }\n  }, \"  \", /*#__PURE__*/React.createElement(GiTrophyCup, {\n    size: \"50px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 49\n    }\n  }), \" Bravo passer au niveau suivant!\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btnResult success\",\n    onClick: () => loadLevelQuestions(quizLevel),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 21\n    }\n  }, \"Niveau suivant\")) : /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"successMsg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 21\n    }\n  }, \" Bravo, rien a dire vous etes un vrais fans!!\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btnResult success\",\n    onClick: () => loadLevelQuestions(0),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 21\n    }\n  }, \"Acceuil\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"percentage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"progressPercent\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }\n  }, \" Reussite : \", percent, \"%\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"progressPercent\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  }, \" Note : \", score, \"/\", maxQuestions, \" \"))) : /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"stepsBtnContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"failureMsg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 21\n    }\n  }, \" Vous avez echou\\xE9 !\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"percentage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"progressPercent\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 17\n    }\n  }, \" Reussite : \", percent, \"%\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"progressPercent\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 17\n    }\n  }, \" Note : \", score, \"/\", maxQuestions, \" \")));\n  const questionAnswerd = score >= averageGrade ? asked.map(options => {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: options.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }\n    }, \" \", options.question), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 17\n      }\n    }, \" \", options.answer), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btnInfo\",\n      onClick: () => showModal(options.heroId),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 21\n      }\n    }, \" Infos \")));\n  }) : /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    colSpan: \"3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 15\n    }\n  })));\n  const result = !loader ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modalHeader\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 21\n    }\n  }, infoCharacter.data.results[0].name)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modalBody\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comicImage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: infoCharacter.data.results[0].thumbnail.path + '.' + infoCharacter.data.results[0].thumbnail.extention,\n    alt: infoCharacter.data.results[0].name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 25\n    }\n  }), infoCharacter.attributionText), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comicDetails\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 25\n    }\n  }, \"description\"), infoCharacter.data.results[0].description === '' ? /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 77\n    }\n  }, \"Description indisponible\") : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 113\n    }\n  }, infoCharacter.data.results[0].description, \" \"), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 25\n    }\n  }, \"Plus d'infos\"), infoCharacter.data.results[0].urls && infoCharacter.data.results[0].urls.map((url, index) => {\n    return /*#__PURE__*/React.createElement(\"a\", {\n      key: index,\n      href: url.url,\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 40\n      }\n    }, url.type);\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modalFooter\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"modalBtn\",\n    onClick: hideModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 21\n    }\n  }, \"fermer\"))) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modalHeader\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 21\n    }\n  }, \"Reponse de marvel...\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modalBody\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 21\n    }\n  })));\n  return /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 9\n    }\n  }, decision, /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 13\n    }\n  }, \"les reponses aux questions pos\\xE9es : \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"answerContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"answers\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 29\n    }\n  }, \"Questions\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 29\n    }\n  }, \"R\\xE9ponses\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 29\n    }\n  }, \"Infos\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 21\n    }\n  }, questionAnswerd))), /*#__PURE__*/React.createElement(Modal, {\n    showModal: openModal,\n    closeModal: hideModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 13\n    }\n  }, result));\n});\nexport default React.memo(QuizOver);","map":{"version":3,"sources":["/Users/hicham/Desktop/marvel/src/component/QuizOver/index.js"],"names":["React","Fragment","useEffect","useState","GiTrophyCup","Loader","Modal","axios","QuizOver","forwardRef","props","ref","API_PUBLIC_KEY","process","env","REACT_APP_MARVEL_API_KEY","hash","levelName","score","maxQuestions","quizLevel","percent","loadLevelQuestions","asked","setasked","openModal","setOpenModal","infoCharacter","setInfoCharacter","loader","setLoader","current","localStorage","getItem","dateStorage","checkDateAge","date","today","Date","now","time","days","clear","setItem","showModal","idHero","JSON","parse","get","then","response","data","stringify","catch","err","console","log","hideModal","averageGrade","setTimeout","decision","length","questionAnswerd","map","options","id","question","answer","heroId","result","results","name","thumbnail","path","extention","attributionText","description","urls","url","index","type","memo"],"mappings":"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","sourcesContent":["import React, {Fragment,useEffect,useState} from 'react'\nimport { GiTrophyCup } from 'react-icons/gi';\nimport Loader from '../Loader/loader';\nimport Modal from '../Modal/index'\nimport axios from 'axios'\n\nconst QuizOver = React.forwardRef((props, ref) => { \n\n    const API_PUBLIC_KEY = process.env.REACT_APP_MARVEL_API_KEY\n    const hash = 'c15fe769e9cfc9b7538d3326c78bb9bd'\n\n    const {\n        levelName, \n        score, \n        maxQuestions, \n        quizLevel, \n        percent,\n        loadLevelQuestions\n    } = props;\n\n    const [asked, setasked] = useState([])\n    const [openModal, setOpenModal] = useState(false)\n    const [infoCharacter, setInfoCharacter] = useState([])\n    const [loader, setLoader] = useState(true)\n\n    useEffect(() => {\n        setasked(ref.current)\n        if(localStorage.getItem('marvelStorageDate')){\n            const dateStorage= localStorage.getItem('marvelStorageDate')\n            checkDateAge(dateStorage)\n        }\n      \n    }, [ref])\n\n   const checkDateAge=(date)=>{\n        const today = Date.now()\n        const time = today - date\n\n       const days = time / (1000*3600*24)\n        \n       if(days >= 15){\n        localStorage.clear()\n        localStorage.setItem('marvelStorageDate', Date.now())\n\n       }\n    \n    }\n\n\n    const showModal =(idHero)=>{\n        \n        if(localStorage.getItem(idHero)){\n            setInfoCharacter(JSON.parse(localStorage.getItem(idHero)))\n            setLoader(false)\n        }else{\n            setOpenModal(true)\n            axios.get(`https://gateway.marvel.com/v1/public/characters/${idHero}?ts=1&apikey=${API_PUBLIC_KEY}&$hash=${hash}`)\n            .then(response =>{\n            setInfoCharacter(response.data)\n            setLoader(false)\n\n            localStorage.setItem(idHero, JSON.stringify(response.data))\n\n            if(!localStorage.getItem('marvelStorageDate')){\n                localStorage.setItem('marvelStorageDate', Date.now())\n            }\n\n\n\n        }).catch(err =>(console.log(err)))\n\n        }\n\n        \n    }\n\n    const hideModal =()=>{\n        setOpenModal(false)\n        setLoader(true)\n    }\n    \n    const averageGrade= maxQuestions / 2\n\n    if(score < averageGrade){ \n        setTimeout(()=>loadLevelQuestions(quizLevel), 2000)\n    }\n\n    const decision = score >= averageGrade ?\n    (\n        <Fragment>\n            <div className='stepsBtnContainer'> \n            {\n                quizLevel < levelName.length ?\n                (\n                    <Fragment>\n                    <p className='successMsg'>  <GiTrophyCup size='50px' /> Bravo passer au niveau suivant!</p>\n                    <button className='btnResult success'\n                            onClick={()=>loadLevelQuestions(quizLevel)} \n                    >Niveau suivant</button>\n                    </Fragment>\n\n                )\n                :\n                (\n                    <Fragment>\n                    <p className='successMsg'> Bravo, rien a dire vous etes un vrais fans!!</p>\n                    <button className='btnResult success'\n                            onClick={()=>loadLevelQuestions(0)} \n                    >Acceuil</button>\n                    </Fragment>\n\n                )\n\n            }\n            </div>\n            <div className='percentage'>\n        <div className='progressPercent'> Reussite : {percent}%</div>\n        <div className='progressPercent'> Note : {score}/{maxQuestions} </div>\n            </div>\n        </Fragment>\n\n    )\n    :\n    (\n        <Fragment>\n                <div className='stepsBtnContainer'> \n                    <p className='failureMsg'> Vous avez echoué !</p>\n                </div>\n            <div className='percentage'>\n                <div className='progressPercent'> Reussite : {percent}%</div>\n                <div className='progressPercent'> Note : {score}/{maxQuestions} </div>\n            </div>\n\n            \n        </Fragment>\n\n    )\n\n    const questionAnswerd = score >=  averageGrade ? (asked.map((options)=>{\n        return(\n            <tr key={options.id}>\n                <td> {options.question }</td>\n                <td> {options.answer }</td>\n                <td>\n                    <button className='btnInfo'\n                            onClick={()=> showModal(options.heroId)}\n                    \n                    > Infos </button>\n                </td>\n            </tr>\n        )\n    })) : \n    (\n        <tr>\n            <td colSpan='3'>\n              <Loader />\n            </td>\n        </tr>\n\n    )\n   \n        const result = !loader ? (\n            <>\n                <div className='modalHeader'>\n                    <h2>{infoCharacter.data.results[0].name}</h2>\n                </div>\n                <div className='modalBody'>\n                    <div className='comicImage'>\n                        <img src={infoCharacter.data.results[0].thumbnail.path+'.'+infoCharacter.data.results[0].thumbnail.extention} alt={infoCharacter.data.results[0].name} />\n                        {infoCharacter.attributionText}\n                    </div>\n                    <div className='comicDetails'>\n                        <h3>description</h3>\n                        {\n                        infoCharacter.data.results[0].description === '' ? (<p>Description indisponible</p>) : (<p>{infoCharacter.data.results[0].description} </p>)\n                        }\n                        <h3>Plus d'infos</h3>\n                        {\n                            infoCharacter.data.results[0].urls &&\n                            infoCharacter.data.results[0].urls.map((url,index) =>{\n                                return <a    key={index} \n                                             href={url.url} \n                                            target='_blank' \n                                            rel='noopener noreferrer' \n                                            className=''>{url.type}</a>\n                            })\n                        }\n                    </div>\n                </div>\n                <div className='modalFooter'>\n                    <button className='modalBtn'  onClick={hideModal} >fermer</button>\n                </div>\n            </>\n        ) :\n        (\n            <>\n            <div className='modalHeader'>\n                    <h2>Reponse de marvel...</h2>\n                </div>\n                <div className='modalBody'>\n                    <Loader />\n                </div>\n            </>\n        )\n\n    return (\n\n        <Fragment>\n           \n           {decision}\n\n            <hr />\n            <p>les reponses aux questions posées : </p>\n\n            <div className='answerContainer'>\n                <table className='answers'>\n                    <thead>\n                        <tr>\n                            <th>Questions</th>\n                            <th>Réponses</th>\n                            <th>Infos</th>\n                        </tr>\n\n                    </thead>\n                    <tbody>\n                        {questionAnswerd}\n                    </tbody>\n                </table>\n            </div>\n            <Modal showModal={openModal} closeModal={hideModal}>\n                    {result}\n            </Modal>\n        </Fragment>\n    )\n})\n\n\n \nexport default React.memo(QuizOver) \n"]},"metadata":{},"sourceType":"module"}